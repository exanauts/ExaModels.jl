```@meta
EditURL = "<unknown>/src/quad.jl"
```

# Example: Quadrotor
First, import ExaModels.jl

````julia
using ExaModels

N= 100

n = 9
p = 4
nd= 9
d(i,j,N) = (j==1 ? 1*sin(2*pi/N*i) : 0.) + (j==3 ? 2*sin(4*pi/N*i) : 0.) + (j==5 ? 2*i/N : 0.)
dt = .01
R = fill(1/10,4)
Q = [1,0,1,0,1,0,1,1,1]
Qf= [1,0,1,0,1,0,1,1,1]/dt

x0s  = [(i,0.) for i=1:n]
itr0 = [(i,j,R[j]) for (i,j) in Base.product(1:N,1:p)]
itr1 = [(i,j,Q[j],d(i,j,N)) for (i,j) in Base.product(1:N,1:n)]
itr2 = [(j,Qf[j],d(N+1,j,N)) for j in 1:n]

c = ExaCore()

x= variable(c,1:N+1,1:n)
u= variable(c,1:N,1:p);

constraint(c, x[1,i]-x0 for (i,x0) in x0s)
constraint(c, -x[i+1,1] + x[i,1] + (x[i,2])*dt for i=1:N)
constraint(c, -x[i+1,2] + x[i,2] + (u[i,1]*cos(x[i,7])*sin(x[i,8])*cos(x[i,9])+u[i,1]*sin(x[i,7])*sin(x[i,9]))*dt for i=1:N)
constraint(c, -x[i+1,3] + x[i,3] + (x[i,4])*dt for i=1:N)
constraint(c, -x[i+1,4] + x[i,4] + (u[i,1]*cos(x[i,7])*sin(x[i,8])*sin(x[i,9])-u[i,1]*sin(x[i,7])*cos(x[i,9]))*dt for i=1:N)
constraint(c, -x[i+1,5] + x[i,5] + (x[i,6])*dt for i=1:N)
constraint(c, -x[i+1,6] + x[i,6] + (u[i,1]*cos(x[i,7])*cos(x[i,8])-9.8)*dt for i=1:N)
constraint(c, -x[i+1,7] + x[i,7] + (u[i,2]*cos(x[i,7])/cos(x[i,8])+u[i,3]*sin(x[i,7])/cos(x[i,8]))*dt for i=1:N)
constraint(c, -x[i+1,8] + x[i,8] + (-u[i,2]*sin(x[i,7])+u[i,3]*cos(x[i,7]))*dt for i=1:N)
constraint(c, -x[i+1,9] + x[i,9] + (u[i,2]*cos(x[i,7])*tan(x[i,8])+u[i,3]*sin(x[i,7])*tan(x[i,8])+u[i,4])*dt for i=1:N)

objective(c, .5*R*(u[i,j]^2) for (i,j,R) in itr0)
objective(c, .5*Q*(x[i,j]-d)^2 for (i,j,Q,d) in itr1)
objective(c, .5*Qf*(x[N+1,j]-d)^2 for (j,Qf,d) in itr2)
````

````
Objective

  min (...) + ∑_{p ∈ P} f(x,p)

  where |P| = 9

````

Create a model

````julia
m = ExaModel(c)
````

````
An ExaModel

  Problem name: Generic
   All variables: ████████████████████ 1309   All constraints: ████████████████████ 909   
            free: ████████████████████ 1309              free: ⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅ 0     
           lower: ⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅ 0                lower: ⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅ 0     
           upper: ⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅ 0                upper: ⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅ 0     
         low/upp: ⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅ 0              low/upp: ⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅ 0     
           fixed: ⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅ 0                fixed: ████████████████████ 909   
          infeas: ⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅ 0               infeas: ⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅ 0     
            nnzh: ( 99.28% sparsity)   6209            linear: ⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅ 0     
                                                    nonlinear: ████████████████████ 909   
                                                         nnzj: ( 99.64% sparsity)   4309  


````

Import Solver

````julia
using NLPModelsIpopt
````

Solve the model

````julia
result = ipopt(m)
````

````
"Execution stats: first-order stationary"
````

Query the solution

````julia
xsol = solution(result, x)
````

````
101×9 reshape(view(::Vector{Float64}, 1:909), 101, 9) with eltype Float64:
  0.0           0.0           0.0           0.0          0.0           0.0         0.0          0.0           0.0
  0.0           3.23117e-27   0.0          -6.46235e-27  0.0           0.0737905  -0.00126698  -0.0019683     1.0782e-6
  3.45127e-29  -0.000334348  -1.13596e-28   0.000215216  0.000737905   0.145657   -0.00226741  -0.00375497    4.42117e-6
 -3.34348e-6   -0.000964965   2.15216e-6    0.000596007  0.00219447    0.215597   -0.00306015  -0.00538824    9.20821e-6
 -1.29931e-5   -0.0018595     8.11223e-6    0.00110404   0.00435044    0.283611   -0.00369462  -0.00689064    1.48989e-5
 -3.15882e-5   -0.00299021    1.91526e-5    0.00171028   0.00718656    0.3497     -0.00421231  -0.00828013    2.11405e-5
 -6.14902e-5   -0.00433299    3.62554e-5    0.00239337   0.0106836     0.413864   -0.004648    -0.00957084    2.77067e-5
 -0.00010482   -0.00586668    6.01891e-5    0.00313816   0.0148222     0.476103   -0.0050307   -0.0107739     3.44554e-5
 -0.000163487  -0.00757246    9.15706e-5    0.00393459   0.0195832     0.53642    -0.00538445  -0.0118978     4.13012e-5
 -0.000239211  -0.00943335    0.000130917   0.00477669   0.0249474     0.594816   -0.00572895  -0.0129491     4.81951e-5
 -0.000333545  -0.0114338     0.000178684   0.00566167   0.0308956     0.651293   -0.00608002  -0.0139327     5.51114e-5
 -0.000447883  -0.0135596     0.0002353     0.00658922   0.0374085     0.705853   -0.00645011  -0.0148521     6.20377e-5
 -0.000583479  -0.0157972     0.000301192   0.00756088   0.044467      0.758497   -0.00684858  -0.0157096     6.89678e-5
 -0.000741452  -0.018134      0.000376801   0.00857946   0.052052      0.809229   -0.00728205  -0.0165069     7.58958e-5
 -0.000922792  -0.0205579     0.000462596   0.0096486    0.0601443     0.858051   -0.00775464  -0.0172447     8.28125e-5
 -0.00112837   -0.0230572     0.000559082   0.0107723    0.0687248     0.904964   -0.00826825  -0.0179234     8.97022e-5
 -0.00135894   -0.0256208     0.000666805   0.0119548    0.0777744     0.949973   -0.00882277  -0.0185428     9.65401e-5
 -0.00161515   -0.0282377     0.000786353   0.0131997    0.0872742     0.993079   -0.00941628  -0.0191025     0.000103291
 -0.00189753   -0.0308974     0.00091835    0.0145105    0.097205      1.03429    -0.0100453   -0.0196018     0.00010991
 -0.0022065    -0.0335894     0.00106345    0.0158898    0.107548      1.0736     -0.0107049   -0.0200399     0.000116337
 -0.00254239   -0.0363036     0.00122235    0.0173395    0.118284      1.11101    -0.0113892   -0.0204159     0.000122506
 -0.00290543   -0.0390302     0.00139575    0.0188603    0.129394      1.14654    -0.012091    -0.020729      0.000128337
 -0.00329573   -0.0417596     0.00158435    0.020452     0.140859      1.18018    -0.0128025   -0.0209783     0.000133745
 -0.00371333   -0.0444822     0.00178887    0.0221133    0.152661      1.21193    -0.0135155   -0.0211629     0.000138637
 -0.00415815   -0.0471891     0.00201       0.0238417    0.16478       1.24181    -0.0142212   -0.0212822     0.000142916
 -0.00463004   -0.0498713     0.00224842    0.0256337    0.177198      1.2698     -0.0149107   -0.0213357     0.000146485
 -0.00512876   -0.0525202     0.00250476    0.0274846    0.189896      1.29593    -0.0155751   -0.021323      0.00014925
 -0.00565396   -0.0551277     0.0027796     0.029389     0.202856      1.32018    -0.0162058   -0.0212438     0.000151122
 -0.00620523   -0.0576859     0.00307349    0.0313402    0.216058      1.34257    -0.0167945   -0.0210983     0.00015202
 -0.00678209   -0.0601872     0.0033869     0.033331     0.229483      1.36309    -0.0173333   -0.0208868     0.000151874
 -0.00738397   -0.0626246     0.00372021    0.0353534    0.243114      1.38176    -0.0178153   -0.0206097     0.00015063
 -0.00801021   -0.0649915     0.00407374    0.0373991    0.256932      1.39857    -0.0182342   -0.0202679     0.000148249
 -0.00866013   -0.0672815     0.00444773    0.0394591    0.270917      1.41353    -0.0185847   -0.0198624     0.000144712
 -0.00933294   -0.069489      0.00484232    0.0415244    0.285053      1.42664    -0.0188626   -0.0193946     0.00014002
 -0.0100278    -0.0716087     0.00525757    0.0435858    0.299319      1.4379     -0.0190645   -0.0188661     0.000134192
 -0.0107439    -0.0736359     0.00569342    0.0456341    0.313698      1.44733    -0.0191886   -0.0182788     0.00012727
 -0.0114803    -0.0755664     0.00614976    0.0476605    0.328171      1.45491    -0.019234    -0.017635      0.000119317
 -0.0122359    -0.0773965     0.00662637    0.0496564    0.34272       1.46066    -0.0192011   -0.016937      0.000110413
 -0.0130099    -0.0791231     0.00712293    0.0516138    0.357327      1.46459    -0.0190915   -0.0161876     0.000100657
 -0.0138011    -0.0807438     0.00763907    0.0535251    0.371973      1.46668    -0.0189079   -0.01539       9.01595e-5
 -0.0146086    -0.0822565     0.00817432    0.0553835    0.38664       1.46696    -0.018654    -0.0145472     7.90468e-5
 -0.0154311    -0.0836599     0.00872816    0.0571831    0.401309      1.46542    -0.0183348   -0.0136629     6.74519e-5
 -0.0162677    -0.0849532     0.00929999    0.0589187    0.415964      1.46206    -0.0179559   -0.0127407     5.55135e-5
 -0.0171173    -0.0861361     0.00988917    0.0605858    0.430584      1.45689    -0.017524    -0.0117847     4.33721e-5
 -0.0179786    -0.087209      0.010495      0.0621812    0.445153      1.44992    -0.0170461   -0.010799      3.11666e-5
 -0.0188507    -0.0881727     0.0111168     0.0637024    0.459652      1.44115    -0.0165302   -0.00978793    1.90304e-5
 -0.0197325    -0.0890285     0.0117539     0.0651478    0.474064      1.43058    -0.0159843   -0.00875588    7.08907e-6
 -0.0206227    -0.0897783     0.0124053     0.0665169    0.488369      1.41822    -0.0154168   -0.00770748   -4.54298e-6
 -0.0215205    -0.0904246     0.0130705     0.0678097    0.502552      1.40407    -0.0148363   -0.00664741   -1.57645e-5
 -0.0224248    -0.0909702     0.0137486     0.0690275    0.516592      1.38814    -0.0142511   -0.0055804    -2.6489e-5
 -0.0233345    -0.0914182     0.0144389     0.0701718    0.530474      1.37043    -0.0136695   -0.00451124   -3.66461e-5
 -0.0242486    -0.0917724     0.0151406     0.0712453    0.544178      1.35095    -0.0130993   -0.00344473   -4.61818e-5
 -0.0251664    -0.0920368     0.0158531     0.0722508    0.557687      1.32971    -0.0125478   -0.00238561   -5.50585e-5
 -0.0260867    -0.0922156     0.0165756     0.0731918    0.570985      1.3067     -0.0120218   -0.00133862   -6.3254e-5
 -0.0270089    -0.0923136     0.0173075     0.0740724    0.584052      1.28194    -0.0115273   -0.000308361  -7.07608e-5
 -0.027932     -0.0923356     0.0180482     0.0748964    0.596871      1.25543    -0.0110694    0.000700646  -7.75838e-5
 -0.0288554    -0.0922867     0.0187972     0.0756685    0.609425      1.22717    -0.0106524    0.00168405   -8.37389e-5
 -0.0297783    -0.0921721     0.0195539     0.0763929    0.621697      1.19717    -0.0102795    0.00263766   -8.92504e-5
 -0.0307       -0.0919972     0.0203178     0.0770742    0.633669      1.16544    -0.00995326   0.00355752   -9.41485e-5
 -0.0316199    -0.0917675     0.0210885     0.0777166    0.645323      1.13199    -0.0096748    0.00443989   -9.84675e-5
 -0.0325376    -0.0914886     0.0218657     0.0783244    0.656643      1.09681    -0.00944446   0.00528128   -0.000102243
 -0.0334525    -0.0911658     0.0226489     0.0789015    0.667611      1.05991    -0.00926158   0.00607851   -0.00010551
 -0.0343642    -0.0908047     0.023438      0.0794515    0.67821       1.02131    -0.00912453   0.00682871   -0.0001083
 -0.0352722    -0.0904107     0.0242325     0.0799779    0.688423      0.981001   -0.00903082   0.00752932   -0.000110644
 -0.0361763    -0.089989      0.0250322     0.0804836    0.698233      0.938995   -0.00897717   0.00817812   -0.000112565
 -0.0370762    -0.0895448     0.0258371     0.080971     0.707623      0.895297   -0.00895958   0.00877328   -0.000114082
 -0.0379717    -0.0890832     0.0266468     0.0814425    0.716576      0.849914   -0.00897346   0.0093133    -0.000115209
 -0.0388625    -0.0886087     0.0274612     0.0818995    0.725075      0.802852   -0.00901372   0.0097971    -0.000115954
 -0.0397486    -0.088126      0.0282802     0.0823436    0.733104      0.754117   -0.00907493   0.0102239    -0.00011632
 -0.0406298    -0.0876393     0.0291036     0.0827755    0.740645      0.703716   -0.00915139   0.0105935    -0.00011631
 -0.0415062    -0.0871525     0.0299314     0.0831959    0.747682      0.651655   -0.00923732   0.0109058    -0.00011592
 -0.0423778    -0.0866695     0.0307634     0.0836049    0.754199      0.597942   -0.00932694   0.0111612    -0.000115147
 -0.0432444    -0.0861935     0.0315994     0.0840026    0.760178      0.542583   -0.00941458   0.0113607    -0.00011399
 -0.0441064    -0.0857276     0.0324394     0.0843886    0.765604      0.485584   -0.00949487   0.0115051    -0.000112447
 -0.0449637    -0.0852746     0.0332833     0.0847624    0.77046       0.426954   -0.00956276   0.0115961    -0.000110521
 -0.0458164    -0.0848369     0.0341309     0.0851234    0.774729      0.366699   -0.00961366   0.0116355    -0.000108217
 -0.0466648    -0.0844164     0.0349822     0.0854707    0.778396      0.304826   -0.00964352   0.0116252    -0.000105546
 -0.0475089    -0.0840151     0.0358369     0.0858035    0.781445      0.241343   -0.00964886   0.0115676    -0.000102524
 -0.0483491    -0.0836343     0.0366949     0.0861211    0.783858      0.176258   -0.00962688   0.0114653    -9.91729e-5
 -0.0491854    -0.0832752     0.0375561     0.0864226    0.785621      0.109577   -0.00957545   0.011321     -9.55192e-5
 -0.0500182    -0.0829386     0.0384204     0.0867073    0.786716      0.0413096  -0.00949313   0.0111377    -9.1595e-5
 -0.0508476    -0.082625      0.0392874     0.0869746    0.787129     -0.0285372  -0.00937917   0.0109185    -8.74366e-5
 -0.0516738    -0.0823347     0.0401572     0.0872239    0.786844     -0.099955   -0.00923351   0.0106666    -8.30836e-5
 -0.0524972    -0.0820678     0.0410294     0.0874549    0.785845     -0.172935   -0.00905673   0.0103852    -7.85782e-5
 -0.0533178    -0.0818241     0.041904      0.0876674    0.784115     -0.24747    -0.00885001   0.0100777    -7.39639e-5
 -0.0541361    -0.0816031     0.0427806     0.0878614    0.781641     -0.323549   -0.00861505   0.00974716   -6.92845e-5
 -0.0549521    -0.0814044     0.0436593     0.088037     0.778405     -0.401165   -0.00835403   0.00939699   -6.45825e-5
 -0.0557662    -0.0812272     0.0445396     0.0881946    0.774393     -0.480307   -0.00806948   0.0090303    -5.98985e-5
 -0.0565784    -0.0810706     0.0454216     0.0883345    0.76959      -0.560967   -0.00776426   0.00865012   -5.52699e-5
 -0.0573891    -0.0809336     0.0463049     0.0884574    0.763981     -0.643134   -0.00744138   0.00825935   -5.07304e-5
 -0.0581985    -0.0808152     0.0471895     0.0885641    0.757549     -0.726798   -0.00710397   0.00786068   -4.63091e-5
 -0.0590066    -0.0807142     0.0480751     0.0886554    0.750281     -0.811948   -0.00675516   0.00745662   -4.20303e-5
 -0.0598138    -0.0806294     0.0489617     0.0887322    0.742162     -0.898574   -0.00639798   0.00704943   -3.79134e-5
 -0.0606201    -0.0805595     0.049849      0.0887956    0.733176     -0.986665   -0.00603529   0.00664111   -3.39726e-5
 -0.0614257    -0.0805034     0.050737      0.0888466    0.723309     -1.07621    -0.00566969   0.00623339   -3.02175e-5
 -0.0622307    -0.0804596     0.0516254     0.0888864    0.712547     -1.16719    -0.00530342   0.00582767   -2.66532e-5
 -0.0630353    -0.0804271     0.0525143     0.088916     0.700875     -1.25961    -0.00493835   0.00542508   -2.32806e-5
 -0.0638396    -0.0804045     0.0534035     0.0889366    0.688279     -1.35344    -0.00457589   0.00502638   -2.00975e-5
 -0.0646436    -0.0803905     0.0542928     0.0889493    0.674745     -1.44867    -0.00421696   0.00463202   -1.7099e-5
 -0.0654475    -0.0803842     0.0551823     0.0889551    0.660258     -1.54529    -0.003862     0.00424213   -1.42779e-5
 -0.0662514    -0.0803842     0.0560719     0.0889551    0.644805     -1.64329    -0.0035109    0.00385649   -1.16259e-5
````

---

*This page was generated using [Literate.jl](https://github.com/fredrikekre/Literate.jl).*

